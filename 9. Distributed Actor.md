## Distributed Actor
```swift
우리는 지금까지 액터 타입을 사용해 동시성을 안전하게 만드는 방법을 배웠다.
이제 마지막장으로 분산된 액터라는 고급 주제를 다룻거이다.
로컬 뿐만 아니라 다른 프로세스나 심지어 서로 다른기계에서도 실행되는 액터이다.

분산된 액터를 사용하는 이유는 다음과 같다.
- 동일한기계에서 자식 프로세스에서 코드를 실행할수 있다. 이렇게하면 치명적인 오류로인해 자식프로세스가 충돌하더라도 주 프로세스는 계속 작동하며 자식프로세스를 새롭게 시작할 수 있다.
- 데이터베이스 서버와 같은 원격기기에서 프로세스를 실행할수 있다.

쉽게말해 여러대의 컴퓨터가 네트워크로 연결되어 서로 협력하거나 연산을 분산처리할수 있는 환경인 멀티노드 환경에서 실행을 분산시키고 싶을때 사용하는것이다.
 
이렇게하면 REST나 GraphQL을 사용하여 데이터를 송수신할필요가없으며, 단순히 서버에서 실행중인 객체에 직접 메서드를 호출할 수 있다.
마지막으로 여러장치 클러스를 사용하여 앙상블로 여러 작업을 수행할 수 있다.

분산된 액터 모델은 오랫동안 사용되어 왔으며 많은 언어에서 액터와분산액터를 제공하는 라이브러리가 있다.
따라서 여기서는 이 모델을 일반적으로 다루는 이론적인 최소한의 내용만 배워볼 것이다.

분산된 액터는 현대적인 동시성을 위한 Swift의 큰 변화 제안중 하나였다.
Swift 5.5에서 async/await이 처음 도입될 때는 분산 언어 기능에 대한 실험적인 부분적 지원이 됐으며 모든 구현이 완료된건 아니였다.
tasks groups actors 와 같은 새로운 동시성 기능이 여러번의 작은 업데이트를 거쳐 개선되었지만 분산된 액터는 전반적으로 이루어지지않았다.
현재 책이 나온 시점에서 스위프트는 5.8이며 분산된 액터는 1년이상동안 존재는 해왔지만 실제 사용에 대한 지원은 여전히 어느정도 밖에 진행되지 않았다.
이 기능은 여전히 실험적이다
그렇기때문이 이 장에서는 이론적인부분만 학습하고 넘어가자

```

## 로컬에서 분산으로
```swift
우리는 액터에대해 이미 알고 있다. 액터는 내부 상태와 동기화된 범위에 자동장벽을 두어 외부에서 동기화된 범위에 접근할때 타입의 상태를 격리시킨다.
이는 다른 액터로부터 호출이 외부 접근으로 간주되어 자동으로 비동기 처리됨을 의미한다.

따라서 이 프로세스는 임의의 시간이 걸릴수 있다. 
예를들어 이런경우다 어떤 액터에서 어떤 값을 바꾸는데 만약 거기에 대기하고있는 객체들이 막 1000개라면 내 우선순위에 따라서 언제 그 실행을 완료 할지는 모르는것이다.

로컬 액터의 경우 컴파일러는 액터 상태의 접근하는 호출을 투명하게 직렬화 한다.
그러나 컴파일러는 때때로 이와 가은 로직을 격리 계층에 삽입할수 있다.
예를들어 분산된 액터는 격리 계층의 비동기적 성격을 활용하여 전송 서비스를 추가할 수 있다.
전송 서비스는 액터메서드호출을 다른 프로세스로, 혹은 다른 네트워크의 다른기계로, 혹은 웹서버에서 제공하는 API 로 전달할수 있다.

분산 액터는 위치 투명성 개념을 도입하여 로컬과 분산액터를 거의 동일하게 다룰수 있게한다.
두 모드간의 전환은 최소한의 코드변경만 필요하다.

분산액터언어기능은 전송에 대해 중립적이므로 전송방식을 선택할수 있다. 동일한 액터가 블루투스, REST 또는 웹소켓기반의 액터시스템에 참여할수도 있다.

분산된 액터는 다음과 같은 제약을 가지고있다.
- 액터외부에서 데이터를 직접 접근할수 없다. 비동기 메서드 호출을 필요로하며, 이를통해 전송계층이 요청을하고 수행하고 응답을 기다린다.
- 분산액터는 자유형식의 ID 속성을 통해 고유하게 식별된다.
- 메서드의 매개변수와 반환값은 액터 시스템에 의해 자동으로 직렬화되어 전송된다.
따라서 Codable 프로토콜을 준수해야한다.
- 모든 속성과 메서드 호출은 사용시 예외를 던진다. 즉 예외ㅇ를 던지지 않는 메서드라고 try를 사용하여 호출해야한다.
```
